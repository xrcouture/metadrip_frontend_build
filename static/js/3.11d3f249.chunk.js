/*! For license information please see 3.11d3f249.chunk.js.LICENSE.txt */
(this.webpackJsonpmetadrip=this.webpackJsonpmetadrip||[]).push([[3,4],{344:function(e,t,n){"use strict";n.r(t),n.d(t,"AlchemyProvider",(function(){return v}));var r=n(37),o=n(26),i=n(8),s=n(9),a=n(5),c=n(6),u=n(343),l=n(83),h=n(49),f=n(31);n(119);function d(){d=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(L){c=function(e,t,n){return e[t]=n}}function u(e,t,n,o){var i=t&&t.prototype instanceof f?t:f,s=Object.create(i.prototype),a=new _(o||[]);return r(s,"_invoke",{value:O(e,n,a)}),s}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(L){return{type:"throw",arg:L}}}e.wrap=u;var h={};function f(){}function p(){}function v(){}var b={};c(b,i,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(N([])));y&&y!==t&&n.call(y,i)&&(b=y);var g=v.prototype=f.prototype=Object.create(b);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var o;r(this,"_invoke",{value:function(r,i){function s(){return new t((function(o,s){!function r(o,i,s,a){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(h).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,a)}))}a(c.arg)}(r,i,o,s)}))}return o=o?o.then(s,s):s()}})}function O(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return I()}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var a=j(s,n);if(a){if(a===h)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function j(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=l(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,h;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function N(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return p.prototype=v,r(g,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=c(v,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},w(k.prototype),c(k.prototype,s,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var s=new k(u(t,n,r,o),i);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},w(g),c(g,a,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=N,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:N(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}var p=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;Object(a.a)(this,e),this.sendBatchFn=t,this.maxBatchSize=n,this.pendingBatch=[]}return Object(c.a)(e,[{key:"enqueueRequest",value:function(e){return Object(u.h)(this,void 0,void 0,d().mark((function t(){var n,r,o=this;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={request:e,resolve:void 0,reject:void 0},r=new Promise((function(e,t){n.resolve=e,n.reject=t})),this.pendingBatch.push(n),this.pendingBatch.length===this.maxBatchSize?this.sendBatchRequest():this.pendingBatchTimer||(this.pendingBatchTimer=setTimeout((function(){return o.sendBatchRequest()}),10)),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"sendBatchRequest",value:function(){return Object(u.h)(this,void 0,void 0,d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.pendingBatch,this.pendingBatch=[],this.pendingBatchTimer&&(clearTimeout(this.pendingBatchTimer),this.pendingBatchTimer=void 0),n=t.map((function(e){return e.request})),e.abrupt("return",this.sendBatchFn(n).then((function(e){t.forEach((function(t,n){var r=e[n];if(r.error){var o=new Error(r.error.message);o.code=r.error.code,o.data=r.error.data,t.reject(o)}else t.resolve(r.result)}))}),(function(e){t.forEach((function(t){t.reject(e)}))})));case 5:case"end":return e.stop()}}),e,this)})))}}]),e}(),v=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var r;Object(a.a)(this,n);var o=n.getApiKey(e.apiKey),i=n.getAlchemyNetwork(e.network),s=n.getAlchemyConnectionInfo(i,o,"http");void 0!==e.url&&(s.url=e.url),s.throttleLimit=e.maxRetries;var c=u.d[i];(r=t.call(this,s,c)).apiKey=e.apiKey,r.maxRetries=e.maxRetries,r.batchRequests=e.batchRequests;var l=Object.assign({},r.connection);l.headers["Alchemy-Ethers-Sdk-Method"]="batchSend";return r.batcher=new p((function(e){return Object(f.b)(l,JSON.stringify(e))})),r}return Object(c.a)(n,[{key:"detectNetwork",value:function(){var e=this,t=Object.create(null,{detectNetwork:{get:function(){return Object(r.a)(Object(o.a)(n.prototype),"detectNetwork",e)}}});return Object(u.h)(this,void 0,void 0,d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(n=this.network)){e.next=7;break}return e.next=4,t.detectNetwork.call(this);case 4:if(n=e.sent){e.next=7;break}throw new Error("No network detected");case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})))}},{key:"_startPending",value:function(){Object(u.t)("WARNING: Alchemy Provider does not support pending filters")}},{key:"isCommunityResource",value:function(){return this.apiKey===u.c}},{key:"send",value:function(e,t){return this._send(e,t,"send")}},{key:"_send",value:function(e,t,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"},s=Object.assign({},this.connection);if(s.headers["Alchemy-Ethers-Sdk-Method"]=n,this.batchRequests||o)return this.batcher.enqueueRequest(i);this.emit("debug",{action:"request",request:Object(u.l)(i),provider:this});var a=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(a&&this._cache[e])return this._cache[e];var c=Object(f.b)(this.connection,JSON.stringify(i),b).then((function(e){return r.emit("debug",{action:"response",request:i,response:e,provider:r}),e}),(function(e){throw r.emit("debug",{action:"response",error:e,request:i,provider:r}),e}));return a&&(this._cache[e]=c,setTimeout((function(){r._cache[e]=null}),0)),c}}],[{key:"getApiKey",value:function(e){if(null==e)return u.c;if(e&&"string"!==typeof e)throw new Error("Invalid apiKey '".concat(e,"' provided. apiKey must be a string."));return e}},{key:"getNetwork",value:function(e){return"string"===typeof e&&e in u.b?u.b[e]:Object(l.a)(e)}},{key:"getAlchemyNetwork",value:function(e){if(void 0===e)return u.i;if("number"===typeof e)throw new Error("Invalid network '".concat(e,"' provided. Network must be a string."));if(!Object.values(u.f).includes(e))throw new Error("Invalid network '".concat(e,"' provided. Network must be one of: ")+"".concat(Object.values(u.f).join(", "),"."));return e}},{key:"getAlchemyConnectionInfo",value:function(e,t,n){var r="http"===n?Object(u.o)(e,t):Object(u.j)(e,t);return{headers:u.e?{"Alchemy-Ethers-Sdk-Version":u.g}:{"Alchemy-Ethers-Sdk-Version":u.g,"Accept-Encoding":"gzip"},allowGzip:!0,url:r}}}]),n}(h.a);function b(e){if(e.error){var t=new Error(e.error.message);throw t.code=e.error.code,t.data=e.error.data,t}return e.result}},345:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"AlchemyWebSocketProvider",(function(){return N}));var r=n(38),o=n(14),i=n(37),s=n(26),a=n(8),c=n(9),u=n(20),l=n(5),h=n(6),f=n(343),d=n(353),p=n.n(d),v=n(11),b=n(83),m=n(73),y=n(344);n(119);function g(){g=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(L){c=function(e,t,n){return e[t]=n}}function u(e,t,n,o){var i=t&&t.prototype instanceof f?t:f,s=Object.create(i.prototype),a=new _(o||[]);return r(s,"_invoke",{value:O(e,n,a)}),s}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(L){return{type:"throw",arg:L}}}e.wrap=u;var h={};function f(){}function d(){}function p(){}var v={};c(v,i,(function(){return this}));var b=Object.getPrototypeOf,m=b&&b(b(N([])));m&&m!==t&&n.call(m,i)&&(v=m);var y=p.prototype=f.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var o;r(this,"_invoke",{value:function(r,i){function s(){return new t((function(o,s){!function r(o,i,s,a){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(h).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,a)}))}a(c.arg)}(r,i,o,s)}))}return o=o?o.then(s,s):s()}})}function O(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return I()}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var a=j(s,n);if(a){if(a===h)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function j(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=l(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,h;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function N(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,r(y,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=c(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,a,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},w(k.prototype),c(k.prototype,s,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var s=new k(u(t,n,r,o),i);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},w(y),c(y,a,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=N,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:N(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}var w=function(){function e(t){Object(l.a)(this,e),this.provider=t,this.maxBackfillBlocks=120}return Object(h.a)(e,[{key:"getNewHeadsBackfill",value:function(e,t,n){return Object(f.h)(this,void 0,void 0,g().mark((function r(){var o,i,s,a,c;return g().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return _(e),r.next=3,this.getBlockNumber();case 3:if(o=r.sent,_(e),0!==t.length){r.next=7;break}return r.abrupt("return",this.getHeadEventsInRange(Math.max(n,o-this.maxBackfillBlocks)+1,o+1));case 7:if(i=Object(f.n)(t[t.length-1].number),s=o-this.maxBackfillBlocks+1,!(i<=s)){r.next=11;break}return r.abrupt("return",this.getHeadEventsInRange(s,o+1));case 11:return r.next=13,this.getReorgHeads(e,t);case 13:return a=r.sent,_(e),r.next=17,this.getHeadEventsInRange(i+1,o+1);case 17:return c=r.sent,_(e),r.abrupt("return",[].concat(Object(u.a)(a),Object(u.a)(c)));case 20:case"end":return r.stop()}}),r,this)})))}},{key:"getLogsBackfill",value:function(e,t,n,r){return Object(f.h)(this,void 0,void 0,g().mark((function o(){var i,s,a,c,l,h,d;return g().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return _(e),o.next=3,this.getBlockNumber();case 3:if(i=o.sent,_(e),0!==n.length){o.next=7;break}return o.abrupt("return",this.getLogsInRange(t,Math.max(r,i-this.maxBackfillBlocks)+1,i+1));case 7:if(s=Object(f.n)(n[n.length-1].blockNumber),a=i-this.maxBackfillBlocks+1,!(s<a)){o.next=11;break}return o.abrupt("return",this.getLogsInRange(t,a,i+1));case 11:return o.next=13,this.getCommonAncestor(e,n);case 13:return c=o.sent,_(e),l=n.filter((function(e){return Object(f.n)(e.blockNumber)>c.blockNumber})).map((function(e){return Object.assign(Object.assign({},e),{removed:!0})})),h=c.blockNumber===Number.NEGATIVE_INFINITY?Object(f.n)(n[0].blockNumber):c.blockNumber,o.next=19,this.getLogsInRange(t,h,i+1);case 19:return d=(d=o.sent).filter((function(e){return e&&(Object(f.n)(e.blockNumber)>c.blockNumber||Object(f.n)(e.logIndex)>c.logIndex)})),_(e),o.abrupt("return",[].concat(Object(u.a)(l),Object(u.a)(d)));case 23:case"end":return o.stop()}}),o,this)})))}},{key:"setMaxBackfillBlock",value:function(e){this.maxBackfillBlocks=e}},{key:"getBlockNumber",value:function(){return Object(f.h)(this,void 0,void 0,g().mark((function e(){var t;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.send("eth_blockNumber");case 2:return t=e.sent,e.abrupt("return",Object(f.n)(t));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"getHeadEventsInRange",value:function(e,t){return Object(f.h)(this,void 0,void 0,g().mark((function n(){var r,o,i;return g().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e>=t)){n.next=2;break}return n.abrupt("return",[]);case 2:for(r=[],o=e;o<t;o++)r.push({method:"eth_getBlockByNumber",params:[Object(f.w)(o),!1]});return n.next=6,this.provider.sendBatch(r);case 6:return i=n.sent,n.abrupt("return",i.map(k));case 8:case"end":return n.stop()}}),n,this)})))}},{key:"getReorgHeads",value:function(e,t){return Object(f.h)(this,void 0,void 0,g().mark((function n(){var r,o,i,s;return g().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=[],o=t.length-1;case 2:if(!(o>=0)){n.next=14;break}return i=t[o],n.next=6,this.getBlockByNumber(Object(f.n)(i.number));case 6:if(s=n.sent,_(e),i.hash!==s.hash){n.next=10;break}return n.abrupt("break",14);case 10:r.push(k(s));case 11:o--,n.next=2;break;case 14:return n.abrupt("return",r.reverse());case 15:case"end":return n.stop()}}),n,this)})))}},{key:"getBlockByNumber",value:function(e){return Object(f.h)(this,void 0,void 0,g().mark((function t(){return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.provider.send("eth_getBlockByNumber",[Object(f.w)(e),!1]));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"getCommonAncestor",value:function(e,t){return Object(f.h)(this,void 0,void 0,g().mark((function n(){var r,o,i;return g().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getBlockByNumber(Object(f.n)(t[t.length-1].blockNumber));case 2:r=n.sent,_(e),o=t.length-1;case 5:if(!(o>=0)){n.next=16;break}if((i=t[o]).blockNumber===r.number){n.next=11;break}return n.next=10,this.getBlockByNumber(Object(f.n)(i.blockNumber));case 10:r=n.sent;case 11:if(i.blockHash!==r.hash){n.next=13;break}return n.abrupt("return",{blockNumber:Object(f.n)(i.blockNumber),logIndex:Object(f.n)(i.logIndex)});case 13:o--,n.next=5;break;case 16:return n.abrupt("return",{blockNumber:Number.NEGATIVE_INFINITY,logIndex:Number.NEGATIVE_INFINITY});case 17:case"end":return n.stop()}}),n,this)})))}},{key:"getLogsInRange",value:function(e,t,n){return Object(f.h)(this,void 0,void 0,g().mark((function r(){var o;return g().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(t>=n)){r.next=2;break}return r.abrupt("return",[]);case 2:return o=Object.assign(Object.assign({},e),{fromBlock:Object(f.w)(t),toBlock:Object(f.w)(n-1)}),r.abrupt("return",this.provider.send("eth_getLogs",[o]));case 4:case"end":return r.stop()}}),r,this)})))}}]),e}();function k(e){var t=Object.assign({},e);return delete t.totalDifficulty,delete t.transactions,delete t.uncles,t}function O(e){return E(e,(function(e){return e.hash}))}function j(e){return E(e,(function(e){return"".concat(e.blockHash,"/").concat(e.logIndex)}))}function E(e,t){var n=new Set,r=[];return e.forEach((function(e){var o=t(e);n.has(o)||(n.add(o),r.push(e))})),r}var x=new Error("Cancelled");function _(e){if(e())throw x}var N=function(t){Object(a.a)(m,t);var d=Object(c.a)(m);function m(t,i){var s,a;Object(l.a)(this,m);var c=y.AlchemyProvider.getApiKey(t.apiKey),u=y.AlchemyProvider.getAlchemyNetwork(t.network),h=y.AlchemyProvider.getAlchemyConnectionInfo(u,c,"wss"),v="alchemy-sdk-".concat(f.g),b=new p.a(null!==(a=t.url)&&void 0!==a?a:h.url,v,{wsConstructor:null!==i&&void 0!==i?i:"undefined"!==typeof e&&null!=e&&null!=e.versions&&null!=e.versions.node?n(354).w3cwebsocket:WebSocket}),k=f.d[u];return(s=d.call(this,b,k))._events=[],s.virtualSubscriptionsById=new Map,s.virtualIdsByPhysicalId=new Map,s.handleMessage=function(e){var t=JSON.parse(e.data);if(function(e){return!function(e){return Array.isArray(e)||"2.0"===e.jsonrpc&&void 0!==e.id}(e)}(t)){var n=t.params.subscription,r=s.virtualIdsByPhysicalId.get(n);if(r){var o=s.virtualSubscriptionsById.get(r);if("eth_subscribe"===o.method)switch(o.params[0]){case"newHeads":var i=o,a=t,c=i.isBackfilling,u=i.backfillBuffer,l=a.params.result;c?function(e,t){C(e,t,T)}(u,l):n!==r?s.emitAndRememberEvent(r,l,T):s.rememberEvent(r,l,T);break;case"logs":var h=o,f=t,d=h.isBackfilling,p=h.backfillBuffer,v=f.params.result;d?function(e,t){C(e,t,S)}(p,v):r!==n?s.emitAndRememberEvent(r,v,S):s.rememberEvent(r,v,S);break;default:if(n!==r){var b=t.params.result;s.emitEvent(r,b)}}}}},s.handleReopen=function(){s.virtualIdsByPhysicalId.clear();var e=function(){var e=!1;return{cancel:function(){return e=!0},isCancelled:function(){return e}}}(),t=e.cancel,n=e.isCancelled;s.cancelBackfill=t;var i,a=Object(r.a)(s.virtualSubscriptionsById.values());try{var c=function(){var e=i.value;Object(f.h)(Object(o.a)(s),void 0,void 0,g().mark((function t(){return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.resubscribeAndBackfill(n,e);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),n()||console.error('Error while backfilling "'.concat(e.params[0],'" subscription. Some events may be missing.'),t.t0);case 8:case"end":return t.stop()}}),t,this,[[0,5]])})))};for(a.s();!(i=a.n()).done;)c()}catch(u){a.e(u)}finally{a.f()}s.startHeartbeat()},s.stopHeartbeatAndBackfill=function(){null!=s.heartbeatIntervalId&&(clearInterval(s.heartbeatIntervalId),s.heartbeatIntervalId=void 0),s.cancelBackfill()},s.apiKey=c,s.backfiller=new w(Object(o.a)(s)),s.addSocketListeners(),s.startHeartbeat(),s.cancelBackfill=f.v,s}return Object(h.a)(m,[{key:"on",value:function(e,t){return this._addEventListener(e,t,!1)}},{key:"once",value:function(e,t){return this._addEventListener(e,t,!0)}},{key:"off",value:function(e,t){return Object(f.q)(e)?this._off(e,t):Object(i.a)(Object(s.a)(m.prototype),"off",this).call(this,e,t)}},{key:"removeAllListeners",value:function(e){return void 0!==e&&Object(f.q)(e)?this._removeAllListeners(e):Object(i.a)(Object(s.a)(m.prototype),"removeAllListeners",this).call(this,e)}},{key:"listenerCount",value:function(e){return void 0!==e&&Object(f.q)(e)?this._listenerCount(e):Object(i.a)(Object(s.a)(m.prototype),"listenerCount",this).call(this,e)}},{key:"listeners",value:function(e){return void 0!==e&&Object(f.q)(e)?this._listeners(e):Object(i.a)(Object(s.a)(m.prototype),"listeners",this).call(this,e)}},{key:"_addEventListener",value:function(e,t,n){if(Object(f.q)(e)){Object(f.x)(e);var r=new f.k(Object(f.m)(e),t,n);return this._events.push(r),this._startEvent(r),this}return Object(i.a)(Object(s.a)(m.prototype),"_addEventListener",this).call(this,e,t,n)}},{key:"_startEvent",value:function(e){[].concat(Object(u.a)(f.a),["block","filter"]).includes(e.type)?this.customStartEvent(e):Object(i.a)(Object(s.a)(m.prototype),"_startEvent",this).call(this,e)}},{key:"_subscribe",value:function(e,t,n,r){return Object(f.h)(this,void 0,void 0,g().mark((function o(){var i,s,a,c,u=this;return g().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return i=this._subIds[e],o.next=3,this.getBlockNumber();case 3:return s=o.sent,null==i&&(i=Promise.all(t).then((function(e){return u.send("eth_subscribe",e)})),this._subIds[e]=i),o.next=7,i;case 7:return a=o.sent,o.next=10,Promise.all(t);case 10:c=o.sent,this.virtualSubscriptionsById.set(a,{event:r,method:"eth_subscribe",params:c,startingBlockNumber:s,virtualId:a,physicalId:a,sentEvents:[],isBackfilling:!1,backfillBuffer:[]}),this.virtualIdsByPhysicalId.set(a,a),this._subs[a]={tag:e,processFunc:n};case 14:case"end":return o.stop()}}),o,this)})))}},{key:"emit",value:function(e){for(var t,n=this,r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];if(Object(f.q)(e)){var c=!1,u=[],l=Object(f.m)(e);return this._events=this._events.filter((function(e){return e.tag!==l||(setTimeout((function(){e.listener.apply(n,o)}),0),c=!0,!e.once||(u.push(e),!1))})),u.forEach((function(e){n._stopEvent(e)})),c}return(t=Object(i.a)(Object(s.a)(m.prototype),"emit",this)).call.apply(t,[this,e].concat(o))}},{key:"sendBatch",value:function(e){return Object(f.h)(this,void 0,void 0,g().mark((function t(){var n,r;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=0,r=e.map((function(e){return{method:e.method,params:e.params,jsonrpc:"2.0",id:"alchemy-sdk:".concat(n++)}})),t.abrupt("return",this.sendBatchConcurrently(r));case 3:case"end":return t.stop()}}),t,this)})))}},{key:"destroy",value:function(){return this.removeSocketListeners(),this.stopHeartbeatAndBackfill(),Object(i.a)(Object(s.a)(m.prototype),"destroy",this).call(this)}},{key:"isCommunityResource",value:function(){return this.apiKey===f.c}},{key:"_stopEvent",value:function(e){var t=this,n=e.tag;if(f.a.includes(e.type)){if(this._events.filter((function(e){return f.a.includes(e.type)})).length)return}else if("tx"===e.type){if(this._events.filter((function(e){return"tx"===e.type})).length)return;n="tx"}else if(this.listenerCount(e.event))return;var r=this._subIds[n];r&&(delete this._subIds[n],r.then((function(e){t._subs[e]&&(delete t._subs[e],t.send("eth_unsubscribe",[e]))})))}},{key:"addSocketListeners",value:function(){this._websocket.addEventListener("message",this.handleMessage),this._websocket.addEventListener("reopen",this.handleReopen),this._websocket.addEventListener("down",this.stopHeartbeatAndBackfill)}},{key:"removeSocketListeners",value:function(){this._websocket.removeEventListener("message",this.handleMessage),this._websocket.removeEventListener("reopen",this.handleReopen),this._websocket.removeEventListener("down",this.stopHeartbeatAndBackfill)}},{key:"resubscribeAndBackfill",value:function(e,t){return Object(f.h)(this,void 0,void 0,g().mark((function n(){var r,o,i,s,a,c,l,h,f,d,p=this;return g().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.virtualId,o=t.method,i=t.params,s=t.sentEvents,a=t.backfillBuffer,c=t.startingBlockNumber,t.isBackfilling=!0,a.length=0,n.prev=3,n.next=6,this.send(o,i);case 6:l=n.sent,_(e),t.physicalId=l,this.virtualIdsByPhysicalId.set(l,r),n.t0=i[0],n.next="newHeads"===n.t0?13:"logs"===n.t0?20:28;break;case 13:return n.next=15,I((function(){return B(p.backfiller.getNewHeadsBackfill(e,s,c),6e4)}),5,(function(){return!e()}));case 15:return h=n.sent,_(e),O([].concat(Object(u.a)(h),Object(u.a)(a))).forEach((function(e){return p.emitNewHeadsEvent(r,e)})),n.abrupt("break",29);case 20:return f=i[1]||{},n.next=23,I((function(){return B(p.backfiller.getLogsBackfill(e,f,s,c),6e4)}),5,(function(){return!e()}));case 23:return d=n.sent,_(e),j([].concat(Object(u.a)(d),Object(u.a)(a))).forEach((function(e){return p.emitLogsEvent(r,e)})),n.abrupt("break",29);case 28:return n.abrupt("break",29);case 29:return n.prev=29,t.isBackfilling=!1,a.length=0,n.finish(29);case 33:case"end":return n.stop()}}),n,this,[[3,,29,33]])})))}},{key:"emitNewHeadsEvent",value:function(e,t){this.emitAndRememberEvent(e,t,T)}},{key:"emitLogsEvent",value:function(e,t){this.emitAndRememberEvent(e,t,S)}},{key:"emitAndRememberEvent",value:function(e,t,n){this.rememberEvent(e,t,n),this.emitEvent(e,t)}},{key:"emitEvent",value:function(e,t){var n=this.virtualSubscriptionsById.get(e);n&&this.emitGenericEvent(n,t)}},{key:"rememberEvent",value:function(e,t,n){var r=this.virtualSubscriptionsById.get(e);r&&C(r.sentEvents,Object.assign({},t),n)}},{key:"emitGenericEvent",value:function(e,t){this.emitProcessFn(e.event)(t)}},{key:"startHeartbeat",value:function(){var e=this;null==this.heartbeatIntervalId&&(this.heartbeatIntervalId=setInterval((function(){return Object(f.h)(e,void 0,void 0,g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B(this.send("net_version"),1e4);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),this._websocket.reconnect();case 8:case"end":return e.stop()}}),e,this,[[0,5]])})))}),3e4))}},{key:"sendBatchConcurrently",value:function(e){return Object(f.h)(this,void 0,void 0,g().mark((function t(){var n=this;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.all(e.map((function(e){return n.send(e.method,e.params)}))));case 1:case"end":return t.stop()}}),t)})))}},{key:"customStartEvent",value:function(e){if(e.type===f.p){var t=e.fromAddress,n=e.toAddress,r=e.hashesOnly;this._subscribe(e.tag,[f.r.PENDING_TRANSACTIONS,{fromAddress:t,toAddress:n,hashesOnly:r}],this.emitProcessFn(e),e)}else if(e.type===f.s){var o=e.addresses,i=e.includeRemoved,s=e.hashesOnly;this._subscribe(e.tag,[f.r.MINED_TRANSACTIONS,{addresses:o,includeRemoved:i,hashesOnly:s}],this.emitProcessFn(e),e)}else"block"===e.type?this._subscribe("block",["newHeads"],this.emitProcessFn(e),e):"filter"===e.type&&this._subscribe(e.tag,["logs",this._getFilter(e.filter)],this.emitProcessFn(e),e)}},{key:"emitProcessFn",value:function(e){var t=this;switch(e.type){case f.p:return function(n){return t.emit({method:f.r.PENDING_TRANSACTIONS,fromAddress:e.fromAddress,toAddress:e.toAddress,hashesOnly:e.hashesOnly},n)};case f.s:return function(n){return t.emit({method:f.r.MINED_TRANSACTIONS,addresses:e.addresses,includeRemoved:e.includeRemoved,hashesOnly:e.hashesOnly},n)};case"block":return function(e){var n=v.a.from(e.number).toNumber();t._emitted.block=n,t.emit("block",n)};case"filter":return function(n){null==n.removed&&(n.removed=!1),t.emit(e.filter,t.formatter.filterLog(n))};default:throw new Error("Invalid event type to `emitProcessFn()`")}}},{key:"_off",value:function(e,t){var n=this;if(null==t)return this.removeAllListeners(e);var r=[],o=!1,i=Object(f.m)(e);return this._events=this._events.filter((function(e){return e.tag!==i||e.listener!=t||(!!o||(o=!0,r.push(e),!1))})),r.forEach((function(e){n._stopEvent(e)})),this}},{key:"_removeAllListeners",value:function(e){var t=this,n=[];if(null==e)n=this._events,this._events=[];else{var r=Object(f.m)(e);this._events=this._events.filter((function(e){return e.tag!==r||(n.push(e),!1)}))}return n.forEach((function(e){t._stopEvent(e)})),this}},{key:"_listenerCount",value:function(e){if(!e)return this._events.length;var t=Object(f.m)(e);return this._events.filter((function(e){return e.tag===t})).length}},{key:"_listeners",value:function(e){if(null==e)return this._events.map((function(e){return e.listener}));var t=Object(f.m)(e);return this._events.filter((function(e){return e.tag===t})).map((function(e){return e.listener}))}}],[{key:"getNetwork",value:function(e){return"string"===typeof e&&e in f.b?f.b[e]:Object(b.a)(e)}}]),m}(m.a);function I(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};return Object(f.h)(this,void 0,void 0,g().mark((function r(){var o,i;return g().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o=0,i=0;case 2:return r.prev=3,r.next=6,e();case 6:return r.abrupt("return",r.sent);case 9:if(r.prev=9,r.t0=r.catch(3),!(++i>=t)&&n(r.t0)){r.next=14;break}throw r.t0;case 14:return r.next=16,L(o);case 16:if(n(r.t0)){r.next=18;break}throw r.t0;case 18:o=0===o?1e3:Math.min(3e4,2*o);case 19:r.next=2;break;case 21:case"end":return r.stop()}}),r,null,[[3,9]])})))}function L(e){return new Promise((function(t){return setTimeout(t,e)}))}function B(e,t){return Promise.race([e,new Promise((function(e,n){return setTimeout((function(){return n(new Error("Timeout"))}),t)}))])}function T(e){return Object(f.n)(e.number)}function S(e){return Object(f.n)(e.blockNumber)}function C(e,t,n){var r=n(t),o=e.findIndex((function(e){return n(e)>r-10}));-1===o?e.length=0:e.splice(0,o),e.push(t)}}.call(this,n(75))},353:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(t,n,r){if(void 0===r&&(r={}),this.url=t,this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this.ondown=null,this.onreopen=null,this.CONNECTING=e.CONNECTING,this.OPEN=e.OPEN,this.CLOSING=e.CLOSING,this.CLOSED=e.CLOSED,this.hasBeenOpened=!1,this.isClosed=!1,this.messageBuffer=[],this.nextRetryTime=0,this.reconnectCount=0,this.lastKnownExtensions="",this.lastKnownProtocol="",this.listeners={},null==n||"string"===typeof n||Array.isArray(n)?this.protocols=n:r=n,this.options=o(r),!this.options.wsConstructor){if("undefined"===typeof WebSocket)throw new Error("WebSocket not present in global scope and no wsConstructor option was provided.");this.options.wsConstructor=WebSocket}this.openNewWebSocket()}return Object.defineProperty(e.prototype,"binaryType",{get:function(){return this.binaryTypeInternal||"blob"},set:function(e){this.binaryTypeInternal=e,this.ws&&(this.ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bufferedAmount",{get:function(){var e=this.ws?this.ws.bufferedAmount:0,t=!1;return this.messageBuffer.forEach((function(n){var r=function(e){return"string"===typeof e?2*e.length:e instanceof ArrayBuffer?e.byteLength:e instanceof Blob?e.size:void 0}(n);null!=r?e+=r:t=!0})),t&&this.debugLog("Some buffered data had unknown length. bufferedAmount() return value may be below the correct amount."),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extensions",{get:function(){return this.ws?this.ws.extensions:this.lastKnownExtensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"protocol",{get:function(){return this.ws?this.ws.protocol:this.lastKnownProtocol},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readyState",{get:function(){return this.isClosed?e.CLOSED:e.OPEN},enumerable:!0,configurable:!0}),e.prototype.close=function(e,t){this.disposeSocket(e,t),this.shutdown(),this.debugLog("WebSocket permanently closed by client.")},e.prototype.send=function(e){if(this.isClosed)throw new Error("WebSocket is already in CLOSING or CLOSED state.");this.ws&&this.ws.readyState===this.OPEN?this.ws.send(e):this.messageBuffer.push(e)},e.prototype.reconnect=function(){if(this.isClosed)throw new Error("Cannot call reconnect() on socket which is permanently closed.");this.disposeSocket(1e3,"Client requested reconnect."),this.handleClose(void 0)},e.prototype.addEventListener=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.dispatchEvent=function(e){return this.dispatchEventOfType(e.type,e)},e.prototype.removeEventListener=function(e,t){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter((function(e){return e!==t})))},e.prototype.openNewWebSocket=function(){var e=this;if(!this.isClosed){var t=this.options,n=t.connectTimeout,r=t.wsConstructor;this.debugLog("Opening new WebSocket to "+this.url+".");var o=new r(this.url,this.protocols);o.onclose=function(t){return e.handleClose(t)},o.onerror=function(t){return e.handleError(t)},o.onmessage=function(t){return e.handleMessage(t)},o.onopen=function(t){return e.handleOpen(t)},this.connectTimeoutId=setTimeout((function(){e.clearConnectTimeout(),e.disposeSocket(),e.handleClose(void 0)}),n),this.ws=o}},e.prototype.handleOpen=function(e){var t=this;if(this.ws&&!this.isClosed){var n=this.options.allClearResetTime;this.debugLog("WebSocket opened."),null!=this.binaryTypeInternal?this.ws.binaryType=this.binaryTypeInternal:this.binaryTypeInternal=this.ws.binaryType,this.clearConnectTimeout(),this.hasBeenOpened?this.dispatchEventOfType("reopen",e):(this.dispatchEventOfType("open",e),this.hasBeenOpened=!0),this.messageBuffer.forEach((function(e){return t.send(e)})),this.messageBuffer=[],this.allClearTimeoutId=setTimeout((function(){t.clearAllClearTimeout(),t.nextRetryTime=0,t.reconnectCount=0;var e=n/1e3|0;t.debugLog("WebSocket remained open for "+e+" seconds. Resetting retry time and count.")}),n)}},e.prototype.handleMessage=function(e){this.isClosed||this.dispatchEventOfType("message",e)},e.prototype.handleClose=function(e){var t=this;if(!this.isClosed){var n=this.options,r=n.maxReconnectAttempts,o=n.shouldReconnect;if(this.clearConnectTimeout(),this.clearAllClearTimeout(),this.ws&&(this.lastKnownExtensions=this.ws.extensions,this.lastKnownProtocol=this.ws.protocol,this.disposeSocket()),this.dispatchEventOfType("down",e),this.reconnectCount>=r)this.stopReconnecting(e,this.getTooManyFailedReconnectsMessage());else{var i=!e||o(e);"boolean"===typeof i?this.handleWillReconnect(i,e,"Provided shouldReconnect() returned false. Closing permanently."):i.then((function(n){t.isClosed||t.handleWillReconnect(n,e,"Provided shouldReconnect() resolved to false. Closing permanently.")}))}}},e.prototype.handleError=function(e){this.dispatchEventOfType("error",e),this.debugLog("WebSocket encountered an error.")},e.prototype.handleWillReconnect=function(e,t,n){e?this.reestablishConnection():this.stopReconnecting(t,n)},e.prototype.reestablishConnection=function(){var e=this,t=this.options,n=t.minReconnectDelay,r=t.maxReconnectDelay,o=t.reconnectBackoffFactor;this.reconnectCount++;var i=this.nextRetryTime;this.nextRetryTime=Math.max(n,Math.min(this.nextRetryTime*o,r)),setTimeout((function(){return e.openNewWebSocket()}),i);var s=i/1e3|0;this.debugLog("WebSocket was closed. Re-opening in "+s+" seconds.")},e.prototype.stopReconnecting=function(e,t){this.debugLog(t),this.shutdown(),e&&this.dispatchEventOfType("close",e)},e.prototype.shutdown=function(){this.isClosed=!0,this.clearAllTimeouts(),this.messageBuffer=[],this.disposeSocket()},e.prototype.disposeSocket=function(e,t){this.ws&&(this.ws.onerror=i,this.ws.onclose=i,this.ws.onmessage=i,this.ws.onopen=i,this.ws.close(e,t),this.ws=void 0)},e.prototype.clearAllTimeouts=function(){this.clearConnectTimeout(),this.clearAllClearTimeout()},e.prototype.clearConnectTimeout=function(){null!=this.connectTimeoutId&&(clearTimeout(this.connectTimeoutId),this.connectTimeoutId=void 0)},e.prototype.clearAllClearTimeout=function(){null!=this.allClearTimeoutId&&(clearTimeout(this.allClearTimeoutId),this.allClearTimeoutId=void 0)},e.prototype.dispatchEventOfType=function(e,t){var n=this;switch(e){case"close":this.onclose&&this.onclose(t);break;case"error":this.onerror&&this.onerror(t);break;case"message":this.onmessage&&this.onmessage(t);break;case"open":this.onopen&&this.onopen(t);break;case"down":this.ondown&&this.ondown(t);break;case"reopen":this.onreopen&&this.onreopen(t)}return e in this.listeners&&this.listeners[e].slice().forEach((function(e){return n.callListener(e,t)})),!t||!t.defaultPrevented},e.prototype.callListener=function(e,t){"function"===typeof e?e.call(this,t):e.handleEvent.call(this,t)},e.prototype.debugLog=function(e){this.options.debug&&console.log(e)},e.prototype.getTooManyFailedReconnectsMessage=function(){var e,t=this.options.maxReconnectAttempts;return"Failed to reconnect after "+t+" "+(e="attempt",(1===t?e:e+"s")+". Closing permanently.")},e.DEFAULT_OPTIONS={allClearResetTime:5e3,connectTimeout:5e3,debug:!1,minReconnectDelay:1e3,maxReconnectDelay:3e4,maxReconnectAttempts:Number.POSITIVE_INFINITY,reconnectBackoffFactor:1.5,shouldReconnect:function(){return!0},wsConstructor:void 0},e.CONNECTING=0,e.OPEN=1,e.CLOSING=2,e.CLOSED=3,e}();function o(e){var t={};return Object.keys(r.DEFAULT_OPTIONS).forEach((function(n){var o=e[n];t[n]=void 0===o?r.DEFAULT_OPTIONS[n]:o})),t}function i(){}t.default=r},354:function(e,t,n){var r;if("object"===typeof globalThis)r=globalThis;else try{r=n(355)}catch(a){}finally{if(r||"undefined"===typeof window||(r=window),!r)throw new Error("Could not determine global this")}var o=r.WebSocket||r.MozWebSocket,i=n(356);function s(e,t){return t?new o(e,t):new o(e)}o&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(s,e,{get:function(){return o[e]}})})),e.exports={w3cwebsocket:o?s:null,version:i}},355:function(e,t){var n=function(){if("object"===typeof self&&self)return self;if("object"===typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"===typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}()},356:function(e,t,n){e.exports=n(357).version},357:function(e){e.exports=JSON.parse('{"_from":"websocket@^1.0.34","_id":"websocket@1.0.34","_inBundle":false,"_integrity":"sha512-PRDso2sGwF6kM75QykIesBijKSVceR6jL2G8NGYyq2XrItNC2P5/qL5XeR056GhA+Ly7JMFvJb9I312mJfmqnQ==","_location":"/websocket","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"websocket@^1.0.34","name":"websocket","escapedName":"websocket","rawSpec":"^1.0.34","saveSpec":null,"fetchSpec":"^1.0.34"},"_requiredBy":["/alchemy-sdk"],"_resolved":"https://registry.npmjs.org/websocket/-/websocket-1.0.34.tgz","_shasum":"2bdc2602c08bf2c82253b730655c0ef7dcab3111","_spec":"websocket@^1.0.34","_where":"C:\\\\Workspace\\\\metadrip\\\\metadrip_frontend\\\\node_modules\\\\alchemy-sdk","author":{"name":"Brian McKelvey","email":"theturtle32@gmail.com","url":"https://github.com/theturtle32"},"browser":"lib/browser.js","bugs":{"url":"https://github.com/theturtle32/WebSocket-Node/issues"},"bundleDependencies":false,"config":{"verbose":false},"contributors":[{"name":"I\xf1aki Baz Castillo","email":"ibc@aliax.net","url":"http://dev.sipdoc.net"}],"dependencies":{"bufferutil":"^4.0.1","debug":"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2","yaeti":"^0.0.6"},"deprecated":false,"description":"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.","devDependencies":{"buffer-equal":"^1.0.0","gulp":"^4.0.2","gulp-jshint":"^2.0.4","jshint":"^2.0.0","jshint-stylish":"^2.2.1","tape":"^4.9.1"},"directories":{"lib":"./lib"},"engines":{"node":">=4.0.0"},"homepage":"https://github.com/theturtle32/WebSocket-Node","keywords":["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],"license":"Apache-2.0","main":"index","name":"websocket","repository":{"type":"git","url":"git+https://github.com/theturtle32/WebSocket-Node.git"},"scripts":{"gulp":"gulp","test":"tape test/unit/*.js"},"version":"1.0.34"}')}}]);
//# sourceMappingURL=3.11d3f249.chunk.js.map